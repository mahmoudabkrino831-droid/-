<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>نظام الحضور - قائمة الموظفين وQR</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<header><h1>نظام الحضور والغياب</h1></header>
<main>
  <section class="card">
    <h2>إضافة / تحديث موظف</h2>
    <form id="empForm">
      <label>الاسم الكامل<input id="empName" required></label>
      <label>الرقم (موبايل أو داخلي)<input id="empPhone" placeholder="مثال: 01012345678"></label>
      <label>تاريخ الميلاد<input id="empDOB" type="date"></label>
      <label>المعرف (لتوليد QR) <input id="empId" placeholder="مثل EMP-001"></label>
      <div class="row">
        <button type="submit">حفظ الموظف</button>
        <button type="button" id="genId">توليد معرف</button>
      </div>
    </form>
  </section>

  <section class="card">
    <h2>قائمة الموظفين</h2>
    <table id="empTable">
      <thead><tr><th>#</th><th>الاسم</th><th>الرقم</th><th>تاريخ الميلاد</th><th>المعرف</th><th>QR</th><th>إجراءات</th></tr></thead>
      <tbody></tbody>
    </table>
    <div class="actions">
      <button id="downloadEmployees">تحميل CSV للموظفين</button>
      <button id="clearEmployees" class="danger">حذف الكل</button>
    </div>
  </section>

  <section class="card">
    <h2>مسح / تسجيل</h2>
    <div class="scanner">
      <video id="video" playsinline></video>
      <canvas id="frame" class="hidden"></canvas>
      <div id="scan-status">جاهز</div>
      <div class="controls">
        <label>نوع التسجيل
          <select id="scanType">
            <option value="checkin">دخول</option>
            <option value="checkout">خروج</option>
            <option value="absent">غياب</option>
          </select>
        </label>
        <button id="toggleCam">تشغيل/إيقاف الكاميرا</button>
      </div>
    </div>
    <div class="manual">
      <label>أدخل المعرّف يدوياً<input id="manualCode" placeholder="EMP-001"></label>
      <button id="manualSubmit">تسجيل</button>
    </div>
  </section>

  <section class="card">
    <h2>سجلات الحضور</h2>
    <input id="searchLogs" placeholder="بحث باسم أو معرف">
    <table id="logTable"><thead><tr><th>#</th><th>الاسم</th><th>المعرف</th><th>النوع</th><th>التاريخ</th><th>الوقت</th></tr></thead><tbody></tbody></table>
    <div class="actions"><button id="exportCSV">تصدير CSV</button><button id="clearLogs" class="danger">حذف السجلات</button></div>
  </section>
</main>
<footer>© نظام حضور بسيط</footer>
<script src="app.js"></script>
</body>
</html>
